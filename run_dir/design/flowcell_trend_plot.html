{% extends "base_b5.html" %}

<!--
Template file: flowcell_trend_plot.html
URL: /flowcells_plot/[timestamp1]-[timestamp]2
Title: Flowcells trend plot
Description: Plots the yield of recent flowcells.
-->

{% block stuff %}

<div id="page_content">
<h1>Flowcells Trend Plot</h1>
<p>The default view shows 1 year worth of flowcells. </p>
<div id="main_plot" style="height: 700px;">
</div>
<div id="control_container" style="margin-top:40px;">
    <div class="row p-3">
        <div id="logs_date" class="col-md-3 d-flex justify-content-center border border-secondary p-3 rounded-3">
          <form class="form-inline" id="logs_date_form">
            <div class="row">
              <div class="col-10">
                Select flowcells from
                <div class='input-group input-group-sm date' id='datepick1'>
                    <input id="inp_date_1" type='text' class="form-control" /><span class="input-group-addon"><span class="input-group-text fa fa-calendar-alt"></span></span>
                </div>
                to
               <div class='input-group input-group-sm date' id='datepick2'>
                <input id="inp_date_2" type='text' class="form-control"/><span class="input-group-addon"><span class="input-group-text fa fa-calendar-alt"></span></span>
               </div>
              </div>
             <div class="col-2 d-flex justify-content-center align-self-center">
              <button id="submit_interval" class="btn btn-primary btn-sm mt-3">Search</button>
             </div>
            </div>
          </form>
        </div>
        <div class="col-md-5 d-flex justify-content-center">
          <div class="d-flex justify-content-center border border-secondary p-3 rounded-3" style="box-sizing: border-box; -moz-box-sizing: border-box; width: 50%">
            <div id="display_type">
                <form class='form-inline' id="display_type_form">
                    Display type :
                    <div class='btn-group btn-group-sm' data-toggle="button" id='display_type_buttons'>
                        <button id="display_by_flowcell" aria-pressed="true" class="btn btn-outline-dark btn-sm active">Flowcell</button>
                        <button id="display_by_lane" class="btn btn-outline-dark btn-sm">Lane</button>
                    </div>
                </form>
            </div>
            <div id="plot_type" class="ml-3">
                <form class='form-inline' id="plot_type_form">
                    Plot type:
                        <div class='btn-group btn-group-sm' data-toggle="button" id='plot_type_buttons'>
                            <button id="plot_lines" aria-pressed="true" class="btn btn-outline-dark btn-sm active">Lines</button>
                            <button id="plot_scatter" class="btn btn-outline-dark btn-sm">Scatter</button>
                        </div>
                </form>
            </div>
          </div>
        </div>
        <div class="col-md-4 d-flex justify-content-center border border-secondary p-3 rounded-3">
            <div id="key_select_div" class="mr-3">
                <form class='form-inline' id="key_select_form">
                    Display :
                    <select class="form-select" id="key_select">
                        <option class="key_select_all" value='total_clusters' selected>Clusters</option>
                        <option class="key_select_all" value='total_yield'>Yield</option>
                        <option class="key_select_lane" value='overeq_q30_pc' disabled>% >= Q30</option>
                        <option class="key_select_lane" value='mqs' disabled>Mean Quality Score</option>
                        <option class="key_select_lane" value='perfect_match_pc' disabled>% perfect match</option>
                        <option class="key_select_lane" value='one_mismatch_pc' disabled>% 1 mismatch</option>
                    </select>
                </form>
            </div>
            <div id="color_select_div">
                <form class='form-inline' id="color_select_form" >
                    Color by :
                    <select class="form-select" id="color_select">
                        <option class="color_option" value='chemver'>Chemistry Version</option>
                        <option class="color_option" value='inst_type'>Instrument Type</option>
                        <option class="color_option" value='inst'>Instrument</option>
                        <option class="color_option" value='month'>Month</option>
                    </select>
                </form>
            </div>
        </div>
    </div>
    <div class="row my-3 pb-3 pr-3">
      <div class="col-md-8 p-3" >
          <div id="inst_filter_div" class="border border-secondary p-3 rounded-3" style="box-sizing: border-box; -moz-box-sizing: border-box; width: 70%">
          </div>
      </div>
        <div id="inst_type_filter_div" class="col-md-3 border border-secondary p-3 m-1 rounded-3">
          <label class="mb-2 d-flex justify-content-center"> Include instrument types </label>
            <form class='form-inline d-flex justify-content-center' id="inst_type_filter_form">
              <div class="form-check form-check-inline">
                <input class="form-check-input filter_inst_type" type="checkbox" id="filter_miseq" name="inst_type_filter" value="M">
                <label class="form-check-label" for="filter_miseq">MiSeq</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input filter_inst_type" type="checkbox" id="filter_nextseq" name="inst_type_filter" value="N">
                <label class="form-check-label" for="filter_nextseq">NextSeq</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input filter_inst_type" type="checkbox" id="filter_novaseq" name="inst_type_filter" value="A" checked>
                <label class="form-check-label" for="filter_novaseq">NovaSeq</label>
              </div>
            </form>
        </div>
      </div>
    </div>
</div>


<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="/static/js/bootstrap-datepicker.min.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script type="text/javascript" src="/static/js/chroma.min.js" ></script>
<script src="/static/js/fc_trend_plot.js?v={{ gs_globals['git_commit'] }}"></script>
{% end %}
